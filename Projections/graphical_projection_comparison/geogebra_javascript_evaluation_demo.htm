<html>
<head>
<title>GeoGebra JavaScript evaluation and XML modification demonstration</title>
<meta name="keywords" content="java,applet,geogebra,dynamic worksheet,interactive,javascript,xml" />
<meta name="generator" content="GeoGebra">
<style type="text/css">
<!--
td	{padding:0px;}
body	{font-family:Helvetica,sans-serif;}
form,applet	{clear:all;}
.pan	{padding-bottom:4px;}
.tab	{background:#c0c0ff;padding:2px;cursor:default;width:128px;text-align:center;margin-bottom:2px;float:right;clear:both;}
.frm	{background:#f0f0ff;border-top:solid thin #c0c0ff;clear:all;margin-bottom:2px;padding-left:4px;}
-->
</style>
<script type="text/javascript">
<!--

function getsource()
{
	document.xmlsource.xmlcode.value = document.ggbApplet.getXML()
}

function clearsource()
{
	document.xmlsource.xmlcode.value = ''
}

function givesource()
{
	document.ggbApplet.setXML(document.xmlsource.xmlcode.value) 
}

function doscript()
{
	eval(document.evaljscript.jscriptcode.value)
}

function clearscript()
{
	document.evaljscript.jscriptcode.value = ''
}

function getggbfile()
{
	document.ggbApplet.openFile(document.getfile.inputfile.value)
}

function toggledescript()
{
	var docelem = document.getElementById('descriptpanel')
	var butelem = document.getElementById('descripthide')
	if (docelem.style.display == 'none')
	{
		docelem.style.display = 'block'
		butelem.firstChild.nodeValue = 'Hide Description'
	}
	else
	{
		docelem.style.display = 'none'
		butelem.firstChild.nodeValue = 'Show Description'
	}
}

function togglejscript()
{
	var docelem = document.evaljscript
	var butelem = document.getElementById('jscripthide')
	if (docelem.style.display == 'none')
	{
		docelem.style.display = 'block'
		butelem.firstChild.nodeValue = 'Hide JavaScript'
	}
	else
	{
		docelem.style.display = 'none'
		butelem.firstChild.nodeValue = 'Show JavaScript'
	}
}

function togglexml()
{
	var docelem = document.xmlsource
	var butelem = document.getElementById('xmlhide')
	if (docelem.style.display == 'none')
	{
		docelem.style.display = 'block'
		butelem.firstChild.nodeValue = 'Hide XML'
	}
	else
	{
		docelem.style.display = 'none'
		butelem.firstChild.nodeValue = 'Show XML'
	}
}

function toggleapplet()
{
	var docelem = document.getElementById('appletpanel')
	var butelem = document.getElementById('applethide')
	if (docelem.style.display == 'none')
	{
		docelem.style.display = 'block'
		butelem.firstChild.nodeValue = 'Hide Applet'
	}
	else
	{
		docelem.style.display = 'none'
		butelem.firstChild.nodeValue = 'Show Applet'
	}
}

function examplejscript()
{
	document.evaljscript.jscriptcode.value = document.getElementById('jscriptexample').firstChild.nodeValue
}

//-->
</script>
</head>
<body>
<h3>GeoGebra JavaScript evaluation and XML modification demonstration</h3>
<table border="0" width="100%">
<tr>
<td>
<div class="frm">
<span id="descripthide" class="tab" onclick="toggledescript()">Hide Description</span>
<p class="pan" id="descriptpanel">
Edit the JavaScript and XML source code in the text fields. Press the various buttons to retrieve or update the XML source, as well as evaluate some JavaScript.
<br/>
<br/>
A full list of Applet parameters and JavaScript commands available for use within an HTML file can be found <a target="_blank" href="http://www.geogebra.org/en/wiki/index.php/GeoGebra_Applet_Parameters">here</a> and <a target="_blank" href="http://www.geogebra.org/en/wiki/index.php/GeoGebra_Applet_Methods">here</a>. A description of the GeoGebra XML file format can be found <a target="_blank" href="http://www.geogebra.org/source/program/xml_format/">here</a>.
</p>
</div>
<div class="frm">
<span id="applethide" class="tab" onclick="toggleapplet()">Hide Applet</span>
<p class="pan" id="appletpanel">
<applet name="ggbApplet" code="geogebra.GeoGebraApplet" codebase="./" archive="http://www.geogebra.org/webstart/geogebra.jar" width="100%" height="800">
<param name="framePossible" value="false">
<param name="showResetIcon" value="true">
<param name="enableRightClick" value="true">
<param name="showMenuBar" value="true">
<param name="showToolBar" value="true">
<param name="showToolBarHelp" value="true">
<param name="showAlgebraInput" value="true">
Sorry, the GeoGebra Applet could not be started. Please make sure that Java 1.4.2 (or later) is installed and active in your browser (<a href="http://java.sun.com/getjava">Click here to install Java now</a>)
</applet>
</p>
</div>
<div class="frm">
<span id="jscripthide" class="tab" onclick="togglejscript()">Hide JavaScript</span>
<form class="pan" name="evaljscript">
<textarea name="jscriptcode" style="width:100%;height:400;overflow:auto;white-space:pre;"></textarea>
<input type="button" value="Example JavaScript" onclick="examplejscript()"/>
<input type="button" value="Evaluate JavaScript" onclick="doscript()"/>
<input type="button" value="Clear JavaScript" onclick="clearscript()"/>
</form>
</div>
<div class="frm">
<span id="xmlhide" class="tab" onclick="togglexml()">Hide XML</span>
<form class="pan" name="xmlsource">
<textarea name="xmlcode" style="width:100%;height:400;overflow:auto;white-space:pre;"></textarea>
<input type="button" value="Get XML source" onclick="getsource()"/>
<input type="button" value="Set XML source" onclick="givesource()"/>
<input type="button" value="Clear XML source" onclick="clearsource()"/>
</form>
</div>
<p class="pan">
<span class="frm" style="font-size:smaller;width:100%;text-align:right;"><a target="_blank" href="http://www.geocities.com/Area51/Quadrant/3864/active.htm">Michael Horvath</a>, Created with <a href="http://www.geogebra.org" target="_blank" >GeoGebra</a></span>
</p>
</td>
</tr>
</table>
<pre id="jscriptexample" style="display:none;">
//The following JavaScript plots a curve representing the harmonic series of the note, C1.
//It also plots a series of points that correspond to the notes of the C major (Ionian) scale.
//The units for the y-axis are hertz; the units for the x-axis are cents.

var notes = ['C','Db','D','Eb','E','F','Gb','G','Ab','A','Bb','B']
var ionian = [1,0,1,0,1,1,0,1,0,1,0,1]
var harmonic_minor = [1,0,1,1,0,1,0,1,1,0,0,1]

function PlotPoints(steptable, octaves, mode) {
  var newcolor = [Math.floor(Math.random()*255),Math.floor(Math.random()*255),Math.floor(Math.random()*255)]
  for (var j = 0; j < octaves; j++) {
    for (var i = 0; i < steptable.length; i++) {
      if (steptable[i] == 1) {
        var notelabel = notes[i % notes.length]
        var thisoctave = j + 1
        var objectname = notelabel + '_{' + thisoctave + '}'
        if (mode == 1) {
          var xvalue = j * 1200 + i * 100
          document.ggbApplet.evalCommand(objectname + '=(' + xvalue + ',h(' + xvalue + '))')
          document.ggbApplet.setLabelVisible(objectname,true)
          document.ggbApplet.setColor(objectname,newcolor[0],newcolor[1],newcolor[2])
        }
	else {
          document.ggbApplet.deleteObject(objectname)
        }
      }
    }
  }
}

function PlotFunction() {
  document.ggbApplet.setCoordSystem(-600, 6000, -65.406, 490.548)
  document.ggbApplet.evalCommand('h(x) = 440 * 2^((x - 4500) / 1200)')
}

PlotFunction()
PlotPoints(harmonic_minor, 4, 1)
</pre>
</body>
</html>